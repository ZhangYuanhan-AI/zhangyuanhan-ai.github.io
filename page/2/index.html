<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="David_Zhang">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="David_Zhang">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="David_Zhang">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>David_Zhang</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">David_Zhang</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/31/Batch-Normalization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Yuanhan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David_Zhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/31/Batch-Normalization/" itemprop="url">Batch Normalization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-31T14:13:26+08:00">
                2019-07-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Deep-Trick/" itemprop="url" rel="index">
                    <span itemprop="name">Deep Trick</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/07/31/Batch-Normalization/" class="leancloud_visitors" data-flag-title="Batch Normalization">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>主要参考：</p>
<ol>
<li><a href="https://zhuanlan.zhihu.com/p/33173246" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/33173246</a></li>
<li><a href="https://www.cnblogs.com/guoyaohua/p/8724433.html" target="_blank" rel="noopener">https://www.cnblogs.com/guoyaohua/p/8724433.html</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/69659844" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/69659844</a></li>
<li><a href="http://mlexplained.com/2018/01/10/an-intuitive-explanation-of-why-batch-normalization-really-works-normalization-in-deep-learning-part-1/" target="_blank" rel="noopener">http://mlexplained.com/2018/01/10/an-intuitive-explanation-of-why-batch-normalization-really-works-normalization-in-deep-learning-part-1/</a></li>
<li><a href="http://xiaofengshi.com/2019/03/06/深度学习-Normalization/" target="_blank" rel="noopener">http://xiaofengshi.com/2019/03/06/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-Normalization/</a> 强推！！！太清晰</li>
</ol>
<h2 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h2><ol>
<li>解决深度学习中的Internal Covariate Shift </li>
<li><strong>为了防止“梯度弥散”</strong></li>
</ol>
<h3 id="Internal-Covariate-Shift"><a href="#Internal-Covariate-Shift" class="headerlink" title="Internal Covariate Shift"></a>Internal Covariate Shift</h3><p>由于每一层网络中的W值在随时改变，所以每一层的输出在训练的时候也在不停的改变，下一层网络要不断重复学习这种不停变化的输入必然会导致收敛速度慢。</p>
<blockquote>
<p>In the context of deep learning, we are particularly concerned with the change in the distribution of the inputs to the inner nodes within a network. A neural network changes the weights of each layer over the course of training. This means that the activations of each layer change as well. Since the activations of a previous layer are the inputs of the next layer, each layer in the neural network is faced with a situation where <strong>the input distribution changes with each step</strong>. This is problematic because it forces each intermediate layer to continuously <strong>adapt</strong> to its changing inputs.</p>
<p>The basic idea behind batch normalization is to limit covariate shift by normalizing the activations of each layer (transforming the inputs to be mean 0 and unit variance). This, supposedly, allows each layer to learn on a more stable distribution of inputs, and would thus accelerate the training of the network.</p>
</blockquote>
<h4 id="Internal-Covariate-Shift带来的问题"><a href="#Internal-Covariate-Shift带来的问题" class="headerlink" title="Internal Covariate Shift带来的问题"></a>Internal Covariate Shift带来的问题</h4><blockquote>
<p>简而言之，每个神经元的输入数据不再是“独立同分布”。（每一层激活函数之前的数据的分布都不同）</p>
<p>其一，上层参数需要不断适应新的输入数据分布，降低学习速度。</p>
<p>其二，下层输入的变化可能趋向于变大或者变小，导致上层落入饱和区（sigmoid），使得学习过早停止。（loss对于当前层的x的求导，就是sigmoid的导数）</p>
<ul>
<li><p>？？？问题是用其他的激活函数-relu可以么？？</p>
<p>所以有其他讨论放在激活函数前还是激活函数之后，但是别忘了Batch Normalization还可以让分布相同的好处。 </p>
</li>
</ul>
<p>其三，每层的更新都会影响到其它层，因此每层的参数更新策略需要尽可能的谨慎。</p>
<ul>
<li><p>引用5</p>
<blockquote>
<p><strong>BN使模型对网络中参数不太敏感，简化调参过程，学习更稳定</strong></p>
<p>在深度学习网络中，调参艰难且复杂，学习率过大的话，参数更新的步伐过大，容易出现震荡和不收敛，使用BN可以使得网络不收到参数数值大小的影响（不会因为参数而影响loss的走向，参数的值会对前层的梯度计算带来影响，总体来说就是w的变化更稳定）</p>
<p>详细点说，反向传播时经过该层的梯度是要乘以该层的参数的，即前向有：</p>
<p><img src="https://www.zhihu.com/equation?tex=h_l+%3D+w_l%5ETh_%7Bl-1%7D" alt="[公式]"></p>
<p>那么反向传播时便有：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B%5Cpartial+l%7D%7B%5Cpartial+h_%7Bl-1%7D%7D+%3D+%5Cfrac%7B%5Cpartial+l%7D%7B%5Cpartial+h_l%7D+.+%5Cfrac%7B%5Cpartial+h_l%7D%7B%5Cpartial+h_%7Bl-1%7D%7D+%3D+%5Cfrac%7B%5Cpartial+l%7D%7B%5Cpartial+h_l%7D+w_l" alt="[公式]"></p>
<p>那么考虑从l层传到k层的情况，有：</p>
<p><img src="https://www.zhihu.com/equation?tex=%5Cfrac%7B%5Cpartial+l%7D%7B%5Cpartial+h_k%7D+%3D+%5Cfrac%7B%5Cpartial+l%7D%7B%5Cpartial+h_l%7D+%5Cprod+_%7Bi%3Dk%2B1%7D%5E%7Bl%7D+w_i" alt="[公式]"></p>
<p>上面这个 <img src="https://www.zhihu.com/equation?tex=%5Cprod_%7Bi%3Dk%2B1%7D%5El+w_i" alt="[公式]"> 便是问题所在。因为网络层很深，如果 <img src="https://www.zhihu.com/equation?tex=w_i" alt="[公式]"> 大多小于1，那么传到这里的时候梯度会变得很小比如 <img src="https://www.zhihu.com/equation?tex=0.9%5E%7B100%7D" alt="[公式]"> ；而如果 <img src="https://www.zhihu.com/equation?tex=w_i" alt="[公式]"> 又大多大于1，那么传到这里的时候又会有梯度爆炸问题 比如<img src="https://www.zhihu.com/equation?tex=1.1%5E%7B100%7D" alt="[公式]"> 。BN所做的就是解决这个梯度传播的问题，因为BN作用抹去了w的scale影响。</p>
<p><img src="https://i.loli.net/2019/07/31/5d4163635143119114.png" alt="4.png"></p>
<p>对数据进行BN处理，忽略公式中的参数ϵϵ</p>
<p><img src="https://i.loli.net/2019/07/31/5d416313a1d3b51063.png" alt="1.png"></p>
<p>也就是经过BN处理后，数据aWx和Wx是相同的。</p>
<p>对参数进行更新</p>
<p><img src="https://i.loli.net/2019/07/31/5d4163317d13a15343.png" alt="2.png"></p>
<p>可以看到权重的缩放不会影响到对x的梯度计算（）</p>
<p><img src="https://i.loli.net/2019/07/31/5d41633f8a66559862.png" alt="3.png"></p>
<p>BN之后对参数的更新，可以得到如果权重越大，也就是a越大，1/a越小，<strong>这意味着权重W的梯度更小，如此BN就保证了梯度不会依赖于参数的缩放，使得参数的更新处在更加稳定的状态。（aW越大，就是a越大对于aw的更新就越小</strong></p>
</blockquote>
</li>
</ul>
</blockquote>
<h2 id="Normalization-通用"><a href="#Normalization-通用" class="headerlink" title="Normalization 通用"></a>Normalization 通用</h2><p>根据上述的分析，我们需要输入数据具有相近的分布，并且输入集中在饱和的区域</p>
<blockquote>
<p>通用变换框架就如下所示：</p>
<p><img src="https://www.zhihu.com/equation?tex=h%3Df%5Cleft%28%5Cbold%7Bg%7D%5Ccdot%5Cfrac%7B%5Cbold%7Bx%7D-%5Cbold%7B%5Cmu%7D%7D%7B%5Cbold%7B%5Csigma%7D%7D%2B%5Cbold%7Bb%7D%5Cright%29%5C%5C" alt="[公式]"></p>
<p>我们来看看这个公式中的各个参数。</p>
<p>（1） <img src="https://www.zhihu.com/equation?tex=%5Cbold%7B%5Cmu%7D" alt="[公式]"> 是<strong>平移参数</strong>（shift parameter）， <img src="https://www.zhihu.com/equation?tex=%5Cbold%7B%5Csigma%7D" alt="[公式]"> 是<strong>缩放参数</strong>（scale parameter）。通过这两个参数进行 shift 和 scale 变换： <img src="https://www.zhihu.com/equation?tex=%5Cbold%7B%5Chat%7Bx%7D%7D%3D%5Cfrac%7B%5Cbold%7Bx%7D-%5Cbold%7B%5Cmu%7D%7D%7B%5Cbold%7B%5Csigma%7D%7D%5C%5C" alt="[公式]"> 得到的数据符合均值为 0、方差为 1 的标准分布。</p>
<p>（2） <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bb%7D" alt="[公式]"> 是<strong>再平移参数</strong>（re-shift parameter）， <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bg%7D" alt="[公式]"> 是<strong>再缩放参数</strong>（re-scale parameter）。将 上一步得到的 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7B%5Chat%7Bx%7D%7D" alt="[公式]"> 进一步变换为： <img src="https://www.zhihu.com/equation?tex=%5Cbold%7By%7D%3D%5Cbold%7Bg%7D%5Ccdot+%5Cbold%7B%5Chat%7Bx%7D%7D+%2B+%5Cbold%7Bb%7D%5C%5C" alt="[公式]"></p>
<p>最终得到的数据符合均值为 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bb%7D" alt="[公式]"> 、方差为 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bg%7D%5E2" alt="[公式]"> 的分布。</p>
</blockquote>
<p>其中 $g$ 和 $b$ 是可学习的参数</p>
<ul>
<li><p>为什么明明归一化掉的参数 $x$ ，第二步怎么又给变走了？</p>
<ul>
<li>为了保证模型的表达能力不因为规范化而下降</li>
</ul>
<blockquote>
<p>我们可以看到，第一步的变换将输入数据限制到了一个全局统一的确定范围（均值为 0、方差为 1）。下层神经元可能很努力地在学习，但不论其如何变化，其输出的结果在交给上层神经元进行处理之前，将被粗暴地重新调整到这一固定范围。</p>
<p>沮不沮丧？沮不沮丧？</p>
<p>难道我们底层神经元人民就在做无用功吗？</p>
<p>所以，为了尊重底层神经网络的学习结果，我们将规范化后的数据进行再平移和再缩放，使得每个神经元对应的输入范围是针对该神经元量身定制的一个确定范围（均值为 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bb%7D" alt="[公式]"> 、方差为 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bg%7D%5E2" alt="[公式]"> ）。rescale 和 reshift 的参数都是可学习的，这就使得 Normalization 层可以学习如何去尊重底层的学习结果。</p>
<p>除了充分利用底层学习的能力，另一方面的重要意义在于保证获得非线性的表达能力。Sigmoid 等激活函数在神经网络中有着重要作用，通过区分饱和区和非饱和区，使得神经网络的数据变换具有了非线性计算能力。而第一步的规范化会将几乎所有数据映射到激活函数的非饱和区（线性区），仅利用到了线性变化能力，从而降低了神经网络的表达能力。而进行再变换，则可以将数据从线性区变换到非线性区，恢复模型的表达能力。</p>
</blockquote>
</li>
</ul>
<ul>
<li><p>这样变过来变过去会不会不一样？</p>
<blockquote>
<p>不会。因为，再变换引入的两个新参数 g 和 b，可以表示旧参数作为输入的同一族函数，但是新参数有不同的学习动态。在旧参数中， <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bx%7D" alt="[公式]"> 的均值取决于下层神经网络的复杂关联；但在新参数中， <img src="https://www.zhihu.com/equation?tex=%5Cbold%7By%7D%3D%5Cbold%7Bg%7D%5Ccdot+%5Cbold%7B%5Chat%7Bx%7D%7D+%2B+%5Cbold%7Bb%7D" alt="[公式]"> 仅由 <img src="https://www.zhihu.com/equation?tex=%5Cbold%7Bb%7D" alt="[公式]"> 来确定，去除了与下层计算的密切耦合。新参数很容易通过梯度下降来学习，简化了神经网络的训练。</p>
</blockquote>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/26/SegMASK/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Yuanhan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David_Zhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/26/SegMASK/" itemprop="url">SegMASK</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-26T14:51:08+08:00">
                2019-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Paper-Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Paper Reading</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/07/26/SegMASK/" class="leancloud_visitors" data-flag-title="SegMASK">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#SegMASK</p>
<p>网络越深，神经元对图像进行“审查”的部分就越大，这可能会导致局部性（localized）变差以及模糊（神经元需要对图像中非常大的区域进行“审查”）。 本文是通过每个神经元只出现在自己感兴趣的区域（只有感兴趣区域的神经元会被激活），进而锐化这种反应，即segmentation-aware CNN。 </p>
<ol>
<li><p>mask</p>
<p>A mask is a filter. Concept of masking is also known as spatial filtering. Masking is also known as filtering. In this concept we just deal with the filtering operation that is performed directly on the image.-masking 是 指在image 领域的 filtering。</p>
<p>在这篇文章中，mask是在局部区域，形成一个局部的前景和后景</p>
</li>
<li><p>Attention mask</p>
<p>创造一种mask(filter)使其具有Attention的功能</p>
</li>
<li><p><img src="https://i.loli.net/2019/07/26/5d3aa33851db834364.png" alt="image-20190726104018892.png"></p>
<p><img src="https://i.loli.net/2019/07/26/5d3aa31d1cfbd11854.png" alt="image-20190726103924114.png"></p>
<p>Embedding的学习，用类似FCN的网络生成，每个中间的Embedding都会upsampling到原图，然后进行cancat，最后再用1*1的filter处理。之后mask就可以用到不同的网络。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/26/BeautyGAN，PairedGAN，CycleGAN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Yuanhan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David_Zhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/26/BeautyGAN，PairedGAN，CycleGAN/" itemprop="url">BeautyGAN，PairedGAN，CycleGAN</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-26T14:49:20+08:00">
                2019-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Paper-Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Paper Reading</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/07/26/BeautyGAN，PairedGAN，CycleGAN/" class="leancloud_visitors" data-flag-title="BeautyGAN，PairedGAN，CycleGAN">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Cycle-GAN"><a href="#Cycle-GAN" class="headerlink" title="Cycle GAN"></a>Cycle GAN</h3><p>Sum:</p>
<p>从Pix2Pix到CycleGAN</p>
<ol>
<li><p>Pix2Pix的问题</p>
<ul>
<li>Pix2Pix必须使用pair的数据，但是这样的数据很难找</li>
</ul>
</li>
<li><p>CycleGAN的改进</p>
<ul>
<li><p>CycleGAN分离了<strong>风格（Style）和内容（content）</strong></p>
<ul>
<li><p>用Adversarial Loss来学习风格</p>
</li>
<li><p>用Cycle Loss来学习内容</p>
</li>
</ul>
</li>
<li><p>为什么不需要pair</p>
<ul>
<li>因为pix2pix的正负样本构造和CycleGAN不同</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="BeautyGAN-AND-PairedGAN"><a href="#BeautyGAN-AND-PairedGAN" class="headerlink" title="BeautyGAN AND PairedGAN"></a>BeautyGAN AND PairedGAN</h3><h3 id="共同特点"><a href="#共同特点" class="headerlink" title="共同特点"></a>共同特点</h3><ol>
<li>不需要成对的图片，只需要化妆图和素颜图</li>
<li>circle GAN：只能让素颜图变好看，或是化妆图变素颜，但是不能很好的针对当前的妆容进行仿妆,所以这两种方法，都加了一些”instance-level transfer”</li>
</ol>
<h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><ol>
<li><p>网络结构</p>
<ul>
<li><p>generator</p>
<ul>
<li><p>B：仿妆图片和素颜图片使用同一个generator,不同的discrimilator</p>
</li>
<li><p>P：仿妆图片和素雅图片使用两个generator，仿妆到素颜的generator不结合素颜图片</p>
<p>对于这两个模型，素颜到仿妆的generator都需要结合两个图片，都是分别卷积之后再cancat，但是B用的是VGG，P用的是空洞卷积。</p>
</li>
</ul>
</li>
<li><p>discrimilator</p>
<ul>
<li>由于generator的不同，两个loss有点差异</li>
</ul>
</li>
</ul>
</li>
<li><p>loss：</p>
<ul>
<li>BeautyGAN多了一个Histogram loss</li>
</ul>
</li>
</ol>
<ol start="3">
<li><p>trainnig</p>
<p>P的generator对于每个仿妆区域分别得到</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/26/GAN，Pix2Pix，Conditional GAN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Yuanhan">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="David_Zhang">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/26/GAN，Pix2Pix，Conditional GAN/" itemprop="url">GAN，Pix2Pix，Conditional GAN</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-26T13:59:32+08:00">
                2019-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Paper-Reading/" itemprop="url" rel="index">
                    <span itemprop="name">Paper Reading</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2019/07/26/GAN，Pix2Pix，Conditional GAN/" class="leancloud_visitors" data-flag-title="GAN，Pix2Pix，Conditional GAN">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="GAN的训练"><a href="#GAN的训练" class="headerlink" title="GAN的训练"></a>GAN的训练</h3><p>用同一个损失函数，首先固定G训练D，然后固定D训练G，再交替或者其他</p>
<p>G，D一般是各种神经网络</p>
<ul>
<li><p>Generator的学习是一种structure learning(<strong>补充</strong>)</p>
</li>
<li><p>为什么不只训练一个生成器</p>
<ul>
<li><p>generator关心的是图片与图片之间，像素之间的差异，而不是全局上的差异</p>
<p><a href="https://zhuanlan.zhihu.com/p/57174645" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/57174645</a></p>
</li>
</ul>
</li>
</ul>
<p>  <img src="https://i.loli.net/2019/07/26/5d3aa0ac6047255161.png" alt="image-20190724113447852.png"></p>
<ul>
<li>图像pix与pix之间的关系很难掌握</li>
</ul>
<ul>
<li><p>判别器为什么不自己产生image-其实是可以的但是有些条件</p>
<ul>
<li><p>对于discriminator的trainning需要借助非常好的negative example，不然稍微给一个好点的negative example就会以为是正样本。（我们不需要左边那个（fake）只需要右边这样好点的（fake））</p>
<p><img src="https://i.loli.net/2019/07/26/5d3aa16b7ed6095205.png" alt="image-20190724134617778.png"></p>
</li>
<li><p>需要求解：<img src="https://i.loli.net/2019/07/26/5d3aa1a7edab232297.png" alt="image-20190724135014277.png"></p>
<p>为什么呢？</p>
<p>因为如果discriminators足够优秀的话，我们可以用这个discriminator得到使得这个discriminator的得到最大值的x，作为你的生成图片x。所以需要求解x。但是这个x通常不好解出来。</p>
<p><strong>训练方法如下</strong></p>
<p><img src="https://i.loli.net/2019/07/26/5d3aa1be8699960397.png" alt="image-20190724135354590.png"></p>
<p>第一排绿色部分是正样本，蓝色部分是生成的数据（这个时候没有引入generator,这个生成的数据可以只是噪声）。discriminator要做的就是给蓝色数据低分，绿色数据高分，然后得到一组argmax(D(X))(D(x)波峰的位置)，这些x的值作为下一轮迭代的生成数据，作为fake值，最后D(x)就会稳定到一个区间。</p>
<p><strong>综上</strong>：</p>
<p>那么怎么产生这些argmax(D(X)呢？-&gt;    我们就要用generator去生成这些argmax(D(X)。</p>
</li>
</ul>
</li>
</ul>
<h3 id="GAN-vanilla"><a href="#GAN-vanilla" class="headerlink" title="GAN vanilla"></a>GAN vanilla</h3><ol>
<li>没有固定输入，输入是噪声；假设要训练形成MNIST就是一串噪声生成0-9的值，<strong>哪个值不确定</strong>。</li>
</ol>
<h3 id="Conditional-GAN"><a href="#Conditional-GAN" class="headerlink" title="Conditional GAN"></a>Conditional GAN</h3><p><a href="https://blog.csdn.net/taoyafan/article/details/81229466" target="_blank" rel="noopener">https://blog.csdn.net/taoyafan/article/details/81229466</a></p>
<p>Sum: </p>
<ol>
<li><p>给GAN添加监督</p>
</li>
<li><p>一个噪声加上一个condition作为输入；假设要训练形成MNIST就是一串噪声生成0-9的值，哪个值根据condition的独热码决定（可以理解为one-hot作为输入，通过one-shot的值，就可以生成图片，<strong>值确定</strong>）</p>
</li>
<li><p>generator()的图片不仅要逼真而且要满足condition。</p>
</li>
<li><p>训练的时候要加上condition和真实图片不同输出为0这种情况。</p>
</li>
</ol>
<h3 id="Pix2Pix"><a href="#Pix2Pix" class="headerlink" title="Pix2Pix"></a>Pix2Pix</h3><p><a href="https://blog.csdn.net/Teeyohuang/article/details/82699781" target="_blank" rel="noopener">https://blog.csdn.net/Teeyohuang/article/details/82699781</a></p>
<p><a href="https://blog.csdn.net/gdymind/article/details/82696481" target="_blank" rel="noopener">https://blog.csdn.net/gdymind/article/details/82696481</a></p>
<p><img src="https://i.loli.net/2019/07/26/5d3aa1d3220fa21229.png" alt="image-20190723165703439.png"></p>
<p>Sum:</p>
<ol>
<li><p>将Conditional GAN引入到image Translation</p>
<p><img src="https://i.loli.net/2019/07/26/5d3ab7f6d9b1e93981.png" alt="WX20190726-161934@2x.png"></p>
<p><img src="https://i.loli.net/2019/07/26/5d3ab953a292f11095.png" alt="WX20190726-162646@2x.png"></p>
<ul>
<li><p>GAN的缺点：</p>
<p>只能生成和目标图片domain相似的图片，但是不能保证这两张图片相似。所以还要用输入图片去监督G的输出。</p>
</li>
<li><p>为什么需要Pair image？</p>
<p>因为Discrimilator需要正样本（x,y）和负样本(x,G(x))。</p>
</li>
</ul>
</li>
</ol>
<ol start="2">
<li>训练一个生成网络，这个网络的目的是让输入图片符合一种映射，比如把语义的图像补齐。</li>
<li>鉴别器是N*N的，就是说，不是整张图出一个0/1，而是一个N * N一个patch就有一个0/1.</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Zhang Yuanhan</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Yuanhan</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("GxkhTbMmcwkcQBiHFSVpjeJV", "u2grDKr3jJbwNHoKnA7lWj3l");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
